# Next.js 15 & React 19 ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ”¹ä¿®è¨ˆç”»æ›¸

## ğŸ“‹ è¨ˆç”»æ¦‚è¦

- **ä½œæˆæ—¥**: 2025å¹´7æœˆ27æ—¥
- **æœ€çµ‚æ›´æ–°**: 2025å¹´7æœˆ27æ—¥ï¼ˆæœ€æ–°å®‰å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªæ¸ˆã¿ï¼‰
- **å¯¾è±¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: RotomSongs (å®¶é›»å’Œæ­Œé›†)
- **ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒ**: GitHub Pagesï¼ˆé™çš„ã‚µã‚¤ãƒˆãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼‰
- **ç¾åœ¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Next.js 14.2.4 + React 18.3.1 + Tailwind CSS 3.4.4
- **ç›®æ¨™ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: Next.js 15.4 + React 19.1.0 + Tailwind CSS 4.1.11
- **äºˆæƒ³å·¥æœŸ**: 3-4é€±é–“ï¼ˆæ¤œè¨¼ãƒ»ãƒ†ã‚¹ãƒˆå«ã‚€ï¼‰
- **ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ ä¸­ãƒªã‚¹ã‚¯ï¼ˆç ´å£Šçš„å¤‰æ›´ã‚ã‚Šï¼‰
- **æ³¨æ„äº‹é …**: SSRä¸ä½¿ç”¨ã€é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆï¼ˆSSGï¼‰ã®ã¿

## ğŸ¯ ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ç›®æ¨™

### æŠ€è¡“çš„ç›®æ¨™
- **Next.js 15**: Turbopackå®‰å®šåŒ–ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã€React 19ã‚µãƒãƒ¼ãƒˆ
- **React 19**: React Compileræœ€é©åŒ–ã€æ–°Hooksã€ã‚ˆã‚Šè‰¯ã„SSR
- **Tailwind CSS 4**: CSS-firstã‚³ãƒ³ãƒ•ã‚£ã‚°ã€å¤§å¹…ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã€ç¾ä»£çš„ãªCSSæ©Ÿèƒ½æ´»ç”¨
- **é•·æœŸä¿å®ˆæ€§**: æœ€æ–°æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã«ã‚ˆã‚‹æŒç¶šå¯èƒ½ãªé–‹ç™º

### ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š**: 
  - Next.js: ãƒ“ãƒ«ãƒ‰æ™‚é–“76%çŸ­ç¸®ã€Fast Refresh 96%é«˜é€ŸåŒ–
  - Tailwind CSS: ãƒ•ãƒ«ãƒ“ãƒ«ãƒ‰5å€é«˜é€ŸåŒ–ã€ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ãƒ“ãƒ«ãƒ‰100å€ä»¥ä¸Šé«˜é€ŸåŒ–
- **é–‹ç™ºä½“é¨“å‘ä¸Š**: React Compilerè‡ªå‹•æœ€é©åŒ–ã€CSS-firstã‚³ãƒ³ãƒ•ã‚£ã‚°ã®ç°¡ç´ åŒ–
- **å°†æ¥å¯¾å¿œ**: 2025å¹´ã®React/Next.js/Tailwindã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¨ã®è¦ªå’Œæ€§

## ğŸ” æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³èª¿æŸ»çµæœï¼ˆ2025å¹´7æœˆ27æ—¥ï¼‰

### ç¢ºèªæ¸ˆã¿æœ€æ–°å®‰å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³
```yaml
Next.js 15.4:
  - ãƒªãƒªãƒ¼ã‚¹æ—¥: 2025å¹´7æœˆ
  - ä¸»è¦æ”¹å–„: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€å®‰å®šæ€§ã€Turbopackäº’æ›æ€§
  - å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 15.3 (2025å¹´4æœˆ), 15.2 (2025å¹´2æœˆ)
  - çŠ¶æ…‹: âœ… å®‰å®šç‰ˆãƒ»æœ¬ç•ªæ¨å¥¨

React 19.1.0:
  - ãƒªãƒªãƒ¼ã‚¹æ—¥: 2025å¹´3æœˆ
  - å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 19.0.0 (2024å¹´12æœˆ - åˆå›å®‰å®šç‰ˆ)
  - ä¸»è¦æ©Ÿèƒ½: Actions, Server Components, React Compiler
  - çŠ¶æ…‹: âœ… å®‰å®šç‰ˆãƒ»æœ¬ç•ªæ¨å¥¨

Tailwind CSS 4.1.11:
  - ãƒªãƒªãƒ¼ã‚¹æ—¥: 2025å¹´6æœˆ
  - å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 4.1.xç³»åˆ—ã®æœ€æ–°ãƒ‘ãƒƒãƒ
  - ä¸»è¦æ©Ÿèƒ½: text-shadow, mask utilities, å¤§å¹…æ€§èƒ½å‘ä¸Š
  - çŠ¶æ…‹: âœ… å®‰å®šç‰ˆãƒ»æœ¬ç•ªæ¨å¥¨
  - äº’æ›æ€§: Safari 16.4+, Chrome 111+, Firefox 128+
```

### èª¿æŸ»ã‚½ãƒ¼ã‚¹
- Next.js: å…¬å¼ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã€GitHub Releases
- React: npm registryã€å…¬å¼ãƒ–ãƒ­ã‚°
- Tailwind CSS: å…¬å¼ã‚µã‚¤ãƒˆã€npm registry

## ğŸ“Š ç¾çŠ¶åˆ†æ

### ç¾åœ¨ã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
```yaml
Core Framework:
  Next.js: 14.2.4 â†’ 15.4 (Major Upgrade - 2025å¹´7æœˆæœ€æ–°)
  React: 18.3.1 â†’ 19.1.0 (Major Upgrade - 2025å¹´3æœˆæœ€æ–°)
  TypeScript: 5.5.2 (äº’æ›æ€§ç¶­æŒ)

Styling:
  Tailwind CSS: 3.4.4 â†’ 4.1.11 (Major Upgrade - 2025å¹´6æœˆæœ€æ–°)
  @tailwindcss/typography: 0.5.13 â†’ v4å¯¾å¿œç‰ˆ
  @tailwindcss/postcss: æ–°è¦å°å…¥å¿…è¦

ä¾å­˜é–¢ä¿‚ (28 packages):
  Production:
    - dompurify: 3.2.6 âš ï¸ (SSRäº’æ›æ€§è¦èª¿æ•´)
    - fuse.js: 7.1.0 âœ… (äº’æ›æ€§OK)
    - gray-matter: 4.0.3 â“ (4å¹´å‰ã€è¦ç¢ºèª)
    - lucide-react: 0.522.0 âš ï¸ (peer dependencyè­¦å‘Š)
    - remark: 15.0.1 âœ… (äº’æ›æ€§OK)
    - zod: 3.25.67 âœ… (äº’æ›æ€§OK)
  
  Development:
    - @types/react: 18.3.3 â†’ 19.x (è¦æ›´æ–°)
    - @types/react-dom: 18.3.0 â†’ 19.x (è¦æ›´æ–°)
    - eslint: 8.57.0 âœ… (äº’æ›æ€§OK)
    - tailwindcss: 3.4.4 âœ… (äº’æ›æ€§OK)
```

### å½±éŸ¿ã‚’å—ã‘ã‚‹ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹

#### ğŸ”´ High Impact (å¿…é ˆå¯¾å¿œ)
```yaml
SearchInput.tsx (L24):
  - forwardRefä½¿ç”¨ â†’ React 19ã§ç°¡ç´ åŒ–å¯èƒ½
  - ç§»è¡Œ: refã‚’propsã¨ã—ã¦å—ã‘å–ã‚‹å½¢å¼ã«å¤‰æ›´

OptimizedImage.tsx (L41):
  - useRef<HTMLImageElement>(null) ä½¿ç”¨
  - å‹å®šç¾©æ›´æ–°ãŒå¿…è¦ (MutableRefObject â†’ RefObject)

layout.tsx (L30-40):
  - dangerouslySetInnerHTMLä½¿ç”¨
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ä»£æ›¿å®Ÿè£…æ¤œè¨

SongCard.tsx (L79), SongDetail.tsx (L155, L192):
  - dangerouslySetInnerHTMLä½¿ç”¨
  - ãƒ“ãƒ«ãƒ‰æ™‚ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ™‚ã®DOMPurifyå‹•ä½œç¢ºèª
  - æ³¨æ„: GitHub Pages = é™çš„ã‚µã‚¤ãƒˆã®ãŸã‚SSRãªã—

Tailwind CSSæ§‹æˆå…¨ä½“:
  - tailwind.config.js â†’ CSS-firstè¨­å®šã«ç§»è¡Œå¿…è¦
  - globals.css: @tailwind directives â†’ @importå¤‰æ›´
  - postcss.config.js: PostCSS pluginæ›´æ–°
  - @tailwindcss/typography: v4äº’æ›æ€§è¦ç¢ºèª
```

#### ğŸŸ¡ Medium Impact (æ¨å¥¨å¯¾å¿œ)
```yaml
Type Definitions:
  - @types/react 19å¯¾å¿œ
  - @types/react-dom 19å¯¾å¿œ
  - ã‚«ã‚¹ã‚¿ãƒ å‹å®šç¾©ã®èª¿æ•´

Build Configuration:
  - next.config.js: React 19æœ€é©åŒ–è¨­å®š
  - tsconfig.json: æ–°æ©Ÿèƒ½å¯¾å¿œè¨­å®š
  - ESLint: React 19ãƒ«ãƒ¼ãƒ«è¿½åŠ 
```

#### ğŸŸ¢ Low Impact (æ§˜å­è¦‹)
```yaml
Performance:
  - React Compilerè‡ªå‹•æœ€é©åŒ–ã®åŠ¹æœæ¸¬å®š
  - memo(), useMemo()æœ€é©åŒ–ã®è¦‹ç›´ã—
  - Bundle sizeã®æ”¹å–„ç¢ºèª
```

## ğŸ”„ æ®µéšçš„ç§»è¡Œè¨ˆç”»

### Phase 1: React 19ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ (2-3æ—¥)

#### 1.1 é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# æ¤œè¨¼ç”¨ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b upgrade/next15-react19

# React 19ã®ã¿å…ˆè¡Œæ›´æ–°
npm install react@19.1.0 react-dom@19.1.0 --save
npm install @types/react@19 @types/react-dom@19 --save-dev
npm install eslint-config-next@15.4 --save-dev
```

#### 1.2 å‹å®šç¾©ã®ä¿®æ­£
```typescript
// useRefå‹å®šç¾©ã®æ›´æ–°ä¾‹
// Before (React 18)
const imgRef = useRef<HTMLImageElement>(null);

// After (React 19)
const imgRef = useRef<HTMLImageElement>(null);
// å‹ã®æ‰±ã„ãŒå¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚è¦ç¢ºèª
```

#### 1.3 åŸºæœ¬å‹•ä½œç¢ºèª
```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ãƒ†ã‚¹ãƒˆ
npm run dev

# ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
npm run build

# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check
```

### Phase 2: Next.js 15ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ (1-2æ—¥)

#### 2.1 Next.js 15ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Next.js 15æ›´æ–°
npm uninstall next
npm install next@15.4

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°æ¤œè¨
# next.config.js - React 19æœ€é©åŒ–è¨­å®šç¢ºèª

# ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
npm run build
```

#### 2.2 åŸºæœ¬å‹•ä½œç¢ºèª
```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ãƒ†ã‚¹ãƒˆ
npm run dev

# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆç¢ºèª
npm run build
```

### Phase 3: ã‚³ãƒ¼ãƒ‰ä¿®æ­£ãƒ»ä¾å­˜é–¢ä¿‚èª¿æ•´ (2-3æ—¥)

#### 3.1 forwardRef â†’ ref prop ç§»è¡Œ
```typescript
// React 19: forwardReféæ¨å¥¨ã€ref propã«ç§»è¡Œ
// SearchInput.tsxä¿®æ­£ä¾‹

// Before (React 18 + forwardRef)
// const SearchInput = forwardRef<HTMLInputElement, SearchInputProps>(...);

// After (React 19 - ref as prop)
interface SearchInputProps {
  ref?: React.Ref<HTMLInputElement>;
  value: string;
  onChange: (value: string) => void;
  // ... other props
}

function SearchInput({ ref, value, onChange, ...props }: SearchInputProps) {
  return (
    <input
      ref={ref}
      value={value}
      onChange={(e) => onChange(e.target.value)}
      {...props}
    />
  );
}
```

#### 3.2 DOMPurify ãƒ“ãƒ«ãƒ‰æ™‚ãƒ»å®Ÿè¡Œæ™‚å¯¾å¿œç¢ºèª
```typescript
// ãƒ“ãƒ«ãƒ‰æ™‚ï¼ˆNode.jsç’°å¢ƒï¼‰/å®Ÿè¡Œæ™‚ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒï¼‰åˆ†å²ã®ç¢ºèª
export function sanitizeLyrics(content: string): string {
  if (typeof window === 'undefined') {
    // ãƒ“ãƒ«ãƒ‰æ™‚ï¼ˆé™çš„ç”Ÿæˆï¼‰: åŸºæœ¬çš„ãªã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†
    return escapeHtml(content);
  }
  
  // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè¡Œæ™‚: DOMPurifyä½¿ç”¨
  return DOMPurify.sanitize(content, {
    ALLOWED_TAGS: ['br', 'p', 'span'],
    ALLOWED_ATTR: [],
    KEEP_CONTENT: true
  });
}

// æ³¨æ„: GitHub Pages = é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆã®ã¿
// SSRï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰ã¯ä½¿ç”¨ã—ãªã„
```

#### 3.3 ä¾å­˜é–¢ä¿‚å•é¡Œã®è§£æ±º
```bash
# lucide-react peer dependencyè­¦å‘Šå¯¾å¿œ
npm install lucide-react@latest --legacy-peer-deps

# gray-matterä»£æ›¿æ¤œè¨ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
npm install front-matter  # ä»£æ›¿å€™è£œ

# æ³¨æ„: isomorphic-dompurifyã¯ä¸è¦ï¼ˆé™çš„ã‚µã‚¤ãƒˆç”Ÿæˆã®ãŸã‚ï¼‰
```

### Phase 4: Tailwind CSS v4 ç§»è¡Œ (3-4æ—¥)

#### 4.1 Tailwind CSS v4 è‡ªå‹•ç§»è¡Œãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
```bash
# Node.js 20ä»¥ä¸ŠãŒå¿…è¦
node --version  # 20+ ç¢ºèª

# Tailwind CSS v4 è‡ªå‹•ç§»è¡Œãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
# å…¬å¼ã®ç§»è¡Œãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ï¼ˆNode.js 20+ãŒå¿…è¦ï¼‰
npx @tailwindcss/upgrade

# ã¾ãŸã¯æ‰‹å‹•è¨­å®šï¼ˆæ¨å¥¨ï¼‰
npm uninstall tailwindcss @tailwindcss/typography
npm install tailwindcss@4.1.11 @tailwindcss/postcss@latest
```

#### 4.2 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ‰‹å‹•å¤‰æ›
```css
/* globals.css - v3ã‹ã‚‰v4ã¸ã®å¤‰æ›´ */
/* Before (v3) */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* After (v4) */
@import "tailwindcss";

/* ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã‚’CSS-firstã«ç§»è¡Œ */
@theme {
  --color-primary-50: #fff7ed;
  --color-primary-100: #ffedd5;
  --color-primary-200: #fed7aa;
  --color-primary-300: #fdba74;
  --color-primary-400: #fb923c;
  --color-primary-500: #f97316;
  --color-primary-600: #ea580c;
  --color-primary-700: #c2410c;
  --color-primary-800: #9a3412;
  --color-primary-900: #7c2d12;
  
  --color-secondary-50: #f9fafb;
  --color-secondary-100: #f3f4f6;
  --color-secondary-500: #6b7280;
  --color-secondary-600: #4b5563;
  --color-secondary-700: #374151;
}
```

#### 4.3 PostCSSè¨­å®šæ›´æ–°
```javascript
// postcss.config.js - v4å¯¾å¿œ
module.exports = {
  plugins: {
    '@tailwindcss/postcss': {},  // æ–°ã—ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
    autoprefixer: {},
  },
}
```

#### 4.4 ã‚«ã‚¹ã‚¿ãƒ @layerã®äº’æ›æ€§ç¢ºèª
```css
/* æ—¢å­˜ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å‹•ä½œç¢ºèª */
@layer components {
  .btn-primary { /* å‹•ä½œç¢ºèª */ }
  .card { /* å‹•ä½œç¢ºèª */ }
  .search-input { /* å‹•ä½œç¢ºèª */ }
}

@layer utilities {
  .text-balance { /* å‹•ä½œç¢ºèª */ }
  .scrollbar-thin { /* å‹•ä½œç¢ºèª */ }
}
```

### Phase 5: åŒ…æ‹¬ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚° (2-3æ—¥)

#### 5.1 æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
```yaml
Core Features Testing:
  - æ¥½æ›²ä¸€è¦§è¡¨ç¤º âœ“
  - æ¥½æ›²è©³ç´°è¡¨ç¤º âœ“
  - æ¤œç´¢æ©Ÿèƒ½ (Fuse.js) âœ“
  - ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ âœ“
  - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ âœ“
  - SEO/ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ âœ“

Performance Testing:
  - Core Web Vitalsæ¸¬å®š
  - ãƒ“ãƒ«ãƒ‰æ™‚é–“æ¸¬å®š
  - Bundle sizeåˆ†æ
  - æ¤œç´¢ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ âœ“
```

#### 5.2 é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆï¼ˆSSGï¼‰ãƒ†ã‚¹ãƒˆ
```bash
# é™çš„ç”Ÿæˆãƒ†ã‚¹ãƒˆï¼ˆGitHub Pagesç”¨ï¼‰
npm run build  # è‡ªå‹•çš„ã« static exportå®Ÿè¡Œ

# æœ¬ç•ªç’°å¢ƒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
npx serve out

# 111æ¥½æ›²ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ç”Ÿæˆç¢ºèª
ls out/songs/ | wc -l  # 111ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª

# é™çš„ã‚¢ã‚»ãƒƒãƒˆç¢ºèª
ls out/_next/static/
ls out/images/
```

#### 5.3 è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆ
```bash
# enhanced-deploy.jsã®ãƒ†ã‚¹ãƒˆ
npm run enhanced-deploy

# å‹ãƒã‚§ãƒƒã‚¯å³æ ¼åŒ–
npm run type-check

# Lint & Format
npm run lint
```

### Phase 4: æœ¬ç•ªé©ç”¨ãƒ»ç›£è¦– (2-3æ—¥)

#### 4.1 æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤
```yaml
Deployment Strategy:
  Day 1: devç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤
  Day 2: stagingç›¸å½“ï¼ˆGitHub Pages previewï¼‰
  Day 3: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆjr6v5m2k.github.ioï¼‰
```

#### 4.2 ç›£è¦–ãƒ»æ¤œè¨¼
```yaml
Success Metrics:
  - ã‚µã‚¤ãƒˆæ­£å¸¸å‹•ä½œ âœ“
  - æ¤œç´¢æ©Ÿèƒ½æ­£å¸¸å‹•ä½œ âœ“
  - ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚é–“ç¶­æŒ âœ“
  - ã‚¨ãƒ©ãƒ¼ç‡ < 1%
  - Core Web Vitalsç¶­æŒ
```

## âš ï¸ ãƒªã‚¹ã‚¯åˆ†æã¨å¯¾ç­–

### ğŸ”´ High Risk

#### 1. DOMPurify ãƒ“ãƒ«ãƒ‰æ™‚äº’æ›æ€§å•é¡Œ
```yaml
Risk: ãƒ“ãƒ«ãƒ‰æ™‚ï¼ˆNode.jsç’°å¢ƒï¼‰ã§DOMPurifyé–¢é€£ã‚¨ãƒ©ãƒ¼
Impact: é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆã®å¤±æ•—
Probability: 20%

å¯¾ç­–:
  - typeof window ãƒã‚§ãƒƒã‚¯ç¢ºèª
  - ãƒ“ãƒ«ãƒ‰æ™‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¼·åŒ–
  - æ®µéšçš„ãƒ†ã‚¹ãƒˆå®Ÿæ–½

Rollback Plan:
  - React 18.3ã¸ã®å³åº§å¾©å¸°
  - æ—¢å­˜sanitize.tså¾©å…ƒ

æ³¨æ„: GitHub Pages = SSRãªã—ã€é™çš„ç”Ÿæˆã®ã¿
```

#### 2. forwardRefç ´å£Šçš„å¤‰æ›´
```yaml
Risk: SearchInputç­‰ã§å‹ã‚¨ãƒ©ãƒ¼ãƒ»å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼
Impact: æ¤œç´¢æ©Ÿèƒ½åœæ­¢
Probability: 30%

å¯¾ç­–:
  - æ®µéšçš„ç§»è¡Œï¼ˆforwardRef â†’ ref propï¼‰
  - ååˆ†ãªãƒ†ã‚¹ãƒˆå®Ÿæ–½
  - TypeScript strict modeæ´»ç”¨

Rollback Plan:
  - forwardRefå®Ÿè£…ã¸ã®å¾©å¸°
  - React 18.xå‹å®šç¾©å¾©å…ƒ
```

### ğŸŸ¡ Medium Risk

#### 3. Tailwind CSS v4 è¨­å®šç§»è¡Œå•é¡Œ
```yaml
Risk: CSS-firstè¨­å®šã¸ã®ç§»è¡Œã§ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ç ´ç¶»
Impact: å…¨ã‚µã‚¤ãƒˆã®ãƒ‡ã‚¶ã‚¤ãƒ³å´©ã‚Œ
Probability: 60%

å¯¾ç­–:
  - è‡ªå‹•ç§»è¡Œãƒ„ãƒ¼ãƒ«ä½¿ç”¨
  - æ®µéšçš„ãªæ‰‹å‹•ç§»è¡Œ
  - ã‚«ã‚¹ã‚¿ãƒ @layerã®å‹•ä½œç¢ºèª

Rollback Plan:
  - Tailwind CSS v3.4.4ã¸ã®å¾©å¸°
  - æ—¢å­˜è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«å¾©å…ƒ
  - PostCSSè¨­å®šå·»ãæˆ»ã—

æ³¨æ„: v4ã¯å®Œå…¨æ›¸ãæ›ãˆã®ãŸã‚è¦æ³¨æ„
```

#### 4. ä¾å­˜é–¢ä¿‚ã®äº’æ›æ€§å•é¡Œ
```yaml
Risk: lucide-react, gray-matterç­‰ã§è­¦å‘Šãƒ»ã‚¨ãƒ©ãƒ¼
Impact: ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºç•°å¸¸ã€Markdownè§£æå¤±æ•—
Probability: 50%

å¯¾ç­–:
  - --legacy-peer-depsä½¿ç”¨
  - ä»£æ›¿ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æº–å‚™
  - è©³ç´°ãªå‹•ä½œç¢ºèª

Rollback Plan:
  - package-lock.jsonå¾©å…ƒ
  - å…¨ä¾å­˜é–¢ä¿‚ã®å·»ãæˆ»ã—
```

#### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–
```yaml
Risk: React 19ç§»è¡Œã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹
Impact: UXæ‚ªåŒ–ã€SEOå½±éŸ¿
Probability: 20%

å¯¾ç­–:
  - React Compileræ´»ç”¨æ¤œè¨
  - Bundle analyzerä½¿ç”¨
  - Core Web Vitalsç¶™ç¶šæ¸¬å®š

Rollback Plan:
  - å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã®å³åº§å¾©å¸°
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®è¦‹ç›´ã—
```

### ğŸŸ¢ Low Risk

#### 5. è‡ªå‹•åŒ–ãƒ‡ãƒ—ãƒ­ã‚¤å½±éŸ¿
```yaml
Risk: enhanced-deploy.jsã§ã®å•é¡Œ
Impact: ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–åœæ­¢
Probability: 15%

å¯¾ç­–:
  - Node.jsäº’æ›æ€§ç¢ºèª
  - Gitæ“ä½œã®å‹•ä½œç¢ºèª
  - manual deployã®æº–å‚™

Rollback Plan:
  - æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã¸ã®åˆ‡ã‚Šæ›¿ãˆ
  - ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¿®æ­£ãƒ»å¾©æ—§
```

## ğŸ”§ å®Ÿè¡Œæ‰‹é †è©³ç´°

### äº‹å‰æº–å‚™

#### 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
```bash
# ç¾åœ¨ã®å®‰å®šç‰ˆã‚’ã‚¿ã‚°ä»˜ã‘
git tag v1.0.0-stable
git push origin v1.0.0-stable

# å®Œå…¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cp -r . ../RotomSongs-backup-$(date +%Y%m%d)
```

#### 2. ä½œæ¥­ç’°å¢ƒæº–å‚™
```bash
# ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout -b upgrade/next15-react19

# ä¾å­˜é–¢ä¿‚ã®ç¾çŠ¶ç¢ºèª
npm list --depth=0 > pre-upgrade-dependencies.txt
```

### Step 1: React 19ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

```bash
# 1. Reactæœ¬ä½“ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
npm uninstall react react-dom
npm install react@19.1.0 react-dom@19.1.0

# 2. å‹å®šç¾©ã®æ›´æ–°
npm uninstall @types/react @types/react-dom
npm install @types/react@19 @types/react-dom@19 --save-dev

# 3. ESLintè¨­å®šã®æ›´æ–°
npm install eslint-config-next@15.4 --save-dev

# 4. åŸºæœ¬å‹•ä½œç¢ºèª
npm run type-check
npm run dev
```

### Step 2: Next.js 15ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰

```bash
# 1. Next.jsæ›´æ–°
npm uninstall next
npm install next@15.4

# 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°æ¤œè¨
# next.config.js - React 19æœ€é©åŒ–è¨­å®šè¿½åŠ 

# 3. ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
npm run build
```

### Step 3: ã‚³ãƒ¼ãƒ‰ä¿®æ­£

#### 3.1 SearchInput.tsxä¿®æ­£
```typescript
// React 19: forwardReféæ¨å¥¨ã€ref propã«ç§»è¡Œ
// æ³¨æ„: React 19ã§forwardRefã¯å®Œå…¨ã«éæ¨å¥¨ã«ãªã‚Šã¾ã—ãŸ

// Before (React 18 + forwardRef)
// const SearchInput = forwardRef<HTMLInputElement, SearchInputProps>(...);

// After (React 19 - ref as prop)
interface SearchInputProps {
  ref?: React.Ref<HTMLInputElement>;
  value: string;
  onChange: (value: string) => void;
  onFocus?: () => void;
  onBlur?: () => void;
  placeholder?: string;
  disabled?: boolean;
  className?: string;
  // ... other props
}

function SearchInput({ ref, value, onChange, ...props }: SearchInputProps) {
  return (
    <input
      ref={ref}
      value={value}
      onChange={(e) => onChange(e.target.value)}
      {...props}
    />
  );
}

// displayNameã‚‚ä¸è¦ã«ãªã‚Šã¾ã™
// SearchInput.displayName = 'SearchInput'; // å‰Šé™¤
```

#### 3.2 OptimizedImage.tsxä¿®æ­£
```typescript
// useRefå‹å®šç¾©ç¢ºèªãƒ»ä¿®æ­£
const imgRef = useRef<HTMLImageElement>(null);
// React 19ã§ã®å‹å®šç¾©å¤‰æ›´ã«å¯¾å¿œ
```

#### 3.3 DOMPurifyå‹•ä½œç¢ºèª
```bash
# ç¾åœ¨ã®å®Ÿè£…ç¢ºèªãƒ»ãƒ†ã‚¹ãƒˆ
npm run build  # ãƒ“ãƒ«ãƒ‰æ™‚ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
npm run dev    # é–‹ç™ºç’°å¢ƒã§ã®å‹•ä½œç¢ºèª

# å¿…è¦ã«å¿œã˜ã¦sanitize.tsã®å¾®èª¿æ•´
# æ³¨æ„: GitHub Pages = é™çš„ç”Ÿæˆã®ã¿ã®ãŸã‚ã€
# isomorphic-dompurifyã¯ä¸è¦
```

### Step 4: ä¾å­˜é–¢ä¿‚èª¿æ•´

```bash
# å•é¡Œã®ã‚ã‚‹ä¾å­˜é–¢ä¿‚ã‚’å€‹åˆ¥å¯¾å¿œ
npm install lucide-react@latest --legacy-peer-deps

# gray-matterã®å‹•ä½œç¢ºèªãƒ»ä»£æ›¿æ¤œè¨
npm test gray-matter-functionality

# å…¨ä½“ã®ä¾å­˜é–¢ä¿‚ç¢ºèª
npm audit
npm list --depth=0
```

### Step 5: Tailwind CSS v4 ç§»è¡Œ

#### 5.1 ç’°å¢ƒç¢ºèªãƒ»æº–å‚™
```bash
# Node.js 20+ ç¢ºèª
node --version

# ç¾åœ¨ã®Tailwindè¨­å®šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cp tailwind.config.js tailwind.config.js.backup
cp src/app/globals.css src/app/globals.css.backup
cp postcss.config.js postcss.config.js.backup
```

#### 5.2 è‡ªå‹•ç§»è¡Œãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
```bash
# Tailwind CSS v4 ç§»è¡Œãƒ„ãƒ¼ãƒ«
npx @tailwindcss/upgrade

# ç§»è¡Œçµæœç¢ºèª
npm run dev  # åŸºæœ¬å‹•ä½œç¢ºèª
```

#### 5.3 æ‰‹å‹•è¨­å®šç§»è¡Œ
```css
/* src/app/globals.css æ›´æ–° */
/* @tailwind directiveså‰Šé™¤ */
@import "tailwindcss";

/* ã‚«ã‚¹ã‚¿ãƒ ãƒ†ãƒ¼ãƒã‚’CSSå¤‰æ•°ã§å®šç¾© */
@theme {
  --color-primary-50: #fff7ed;
  --color-primary-100: #ffedd5;
  /* ... ä»–ã®ã‚«ãƒ©ãƒ¼è¨­å®š */
  
  --font-family-sans: Inter, "Noto Sans JP", system-ui, sans-serif;
  --font-family-mono: "Fira Code", monospace;
}

/* æ—¢å­˜ã®@layeræ§‹æ–‡ã¯ãã®ã¾ã¾ç¶­æŒ */
@layer components {
  .btn-primary {
    @apply bg-orange-500 hover:bg-orange-600 text-white;
  }
  /* ... ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ */
}
```

#### 5.4 PostCSSè¨­å®šæ›´æ–°
```javascript
// postcss.config.js
module.exports = {
  plugins: {
    '@tailwindcss/postcss': {},  // æ–°ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
    autoprefixer: {},
  },
}
```

#### 5.5 Typography pluginç¢ºèª
```css
/* v4ã§ã¯@pluginãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã§CSSã«ç›´æ¥å«ã‚ã‚‹ */
@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* å¾“æ¥ã®JavaScriptè¨­å®šã¯ä¸è¦ */
/* tailwind.config.js ã® plugins: [require('@tailwindcss/typography')] å‰Šé™¤ */
```

```bash
# v4å¯¾å¿œ: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ç›´æ¥CSSã§æŒ‡å®šã™ã‚‹ãŸã‚ã€
# package.jsonã‹ã‚‰ã®å‰Šé™¤ã‚’æ¤œè¨
npm uninstall @tailwindcss/typography

# å¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’@themeã§å†å®šç¾©
```

### Step 6: åŒ…æ‹¬ãƒ†ã‚¹ãƒˆ

#### 6.1 é–‹ç™ºç’°å¢ƒãƒ†ã‚¹ãƒˆ
```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼
npm run dev
# http://localhost:3000 ã§å…¨æ©Ÿèƒ½ç¢ºèª

# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# Lintç¢ºèª
npm run lint
```

#### 6.2 ãƒ“ãƒ«ãƒ‰ãƒ»æœ¬ç•ªãƒ†ã‚¹ãƒˆ
```bash
# é™çš„ç”Ÿæˆ
npm run build

# å‡ºåŠ›ç¢ºèª
ls -la out/
ls out/songs/ | wc -l  # 111æ¥½æ›²ç¢ºèª

# æœ¬ç•ªç’°å¢ƒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
npx serve out
# http://localhost:3000 ã§å‹•ä½œç¢ºèª
```

#### 6.3 è‡ªå‹•åŒ–ãƒ†ã‚¹ãƒˆ
```bash
# enhanced-deploy.js ãƒ†ã‚¹ãƒˆ
# æ³¨æ„: å®Ÿéš›ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¯é¿ã‘ã€dry-runãƒ¢ãƒ¼ãƒ‰å®Ÿè£…æ¨å¥¨
npm run enhanced-deploy -- --dry-run
```

### Step 6: æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

#### 6.1 æœ€çµ‚ç¢ºèª
```bash
# å¤‰æ›´å†…å®¹ãƒ¬ãƒ“ãƒ¥ãƒ¼
git diff main..HEAD

# ã‚³ãƒŸãƒƒãƒˆæº–å‚™
git add .
git commit -m "feat: Upgrade to Next.js 15 + React 19

- Upgrade Next.js 14.2.4 â†’ 15.x
- Upgrade React 18.3.1 â†’ 19.x  
- Update @types/react and @types/react-dom to v19
- Migrate forwardRef to ref prop pattern
- Enhance DOMPurify SSR compatibility
- Resolve lucide-react peer dependency issues

ğŸ¤– Generated with Claude Code

Co-Authored-By: Claude <noreply@anthropic.com>"
```

#### 6.2 ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
```bash
# æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
npm run enhanced-deploy

# ã¾ãŸã¯æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤
git push origin upgrade/next15-react19
# GitHub ActionsçµŒç”±ã€ã¾ãŸã¯mergeå¾Œã®ãƒ‡ãƒ—ãƒ­ã‚¤
```

#### 6.3 ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œç›£è¦–
```yaml
Immediate Checks (15åˆ†ä»¥å†…):
  - ã‚µã‚¤ãƒˆã‚¢ã‚¯ã‚»ã‚¹ç¢ºèª: https://jr6v5m2k.github.io/RotomSongs/
  - æ¥½æ›²è©³ç´°ãƒšãƒ¼ã‚¸: ãƒ©ãƒ³ãƒ€ãƒ ã«5-10æ¥½æ›²ç¢ºèª
  - æ¤œç´¢æ©Ÿèƒ½: ã€Œãƒ­ãƒˆãƒ ã€ã€Œå®¶é›»ã€ç­‰ã§ãƒ†ã‚¹ãƒˆ
  - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–: ãƒ¢ãƒã‚¤ãƒ«ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆç¢ºèª

Performance Monitoring (24æ™‚é–“):
  - PageSpeed Insightså®Ÿè¡Œ
  - Core Web Vitalsç¢ºèª
  - ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–
  - ã‚¢ã‚¯ã‚»ã‚¹è§£æç¢ºèª
```

## ğŸ”„ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»

### ç·Šæ€¥ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ (1æ™‚é–“ä»¥å†…)

#### ãƒ‘ã‚¿ãƒ¼ãƒ³1: å³åº§ã®Git revert
```bash
# ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆã«æˆ»ã™
git revert HEAD

# ç·Šæ€¥ãƒ‡ãƒ—ãƒ­ã‚¤
npm run enhanced-deploy

# ã¾ãŸã¯ã€å®‰å®šç‰ˆã‚¿ã‚°ã¸ã®å¾©å¸°
git checkout v1.0.0-stable
git push origin main --force  # æ³¨æ„: æ…é‡ã«å®Ÿè¡Œ
```

#### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒ–ãƒ©ãƒ³ãƒåˆ‡ã‚Šæ›¿ãˆ
```bash
# main ãƒ–ãƒ©ãƒ³ãƒã‚’å®‰å®šç‰ˆã«æˆ»ã™
git checkout main
git reset --hard v1.0.0-stable
git push origin main --force

# å³åº§ã«ãƒ‡ãƒ—ãƒ­ã‚¤
npm run enhanced-deploy
```

### æ®µéšçš„ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ (åŠæ—¥)

#### 1. éƒ¨åˆ†çš„ä¿®æ­£
```bash
# ç‰¹å®šã®å•é¡Œç®‡æ‰€ã®ã¿ä¿®æ­£
git checkout HEAD~1 -- src/components/SearchInput.tsx
git commit -m "fix: Revert SearchInput to forwardRef pattern"
```

#### 2. ä¾å­˜é–¢ä¿‚ã®ã¿ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
```bash
# React/Next.jsã®ã¿ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰
npm install react@18.3.1 react-dom@18.3.1
npm install next@14.2.4
npm install @types/react@18.3.3 @types/react-dom@18.3.0 --save-dev

git commit -m "fix: Rollback to React 18 + Next.js 14"
```

## ğŸ“Š æˆåŠŸåŸºæº–ãƒ»KPI

### æ©Ÿèƒ½è¦ä»¶ âœ…
```yaml
å¿…é ˆæ©Ÿèƒ½ (100%å‹•ä½œ):
  âœ“ æ¥½æ›²ä¸€è¦§è¡¨ç¤ºï¼ˆ111æ¥½æ›²ï¼‰
  âœ“ æ¥½æ›²è©³ç´°è¡¨ç¤º
  âœ“ Fuse.jsæ¤œç´¢æ©Ÿèƒ½
  âœ“ ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ
  âœ“ ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
  âœ“ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
  âœ“ SEO/ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

å“è³ªè¦ä»¶:
  âœ“ TypeScriptå‹ã‚¨ãƒ©ãƒ¼: 0ä»¶
  âœ“ ESLintè­¦å‘Š: 0ä»¶
  âœ“ ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼: 0ä»¶
  âœ“ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼: 0ä»¶
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ ğŸ“ˆ
```yaml
Core Web Vitals:
  - FCP (First Contentful Paint): â‰¤ 1.5s
  - LCP (Largest Contentful Paint): â‰¤ 2.5s  
  - TTI (Time to Interactive): â‰¤ 3.0s
  - CLS (Cumulative Layout Shift): â‰¤ 0.1

Build Performance:
  - ãƒ“ãƒ«ãƒ‰æ™‚é–“: å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯” Â±20%ä»¥å†…
  - Bundle size: å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯” Â±10%ä»¥å†…
  
Search Performance:
  - æ¤œç´¢å¿œç­”æ™‚é–“: â‰¤ 100ms (111æ¥½æ›²)
  - ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ: â‰¤ 50ms
```

### ä¿¡é ¼æ€§è¦ä»¶ ğŸ›¡ï¸
```yaml
Availability:
  - ã‚µã‚¤ãƒˆç¨¼åƒç‡: â‰¥ 99.9%
  - æ¤œç´¢æ©Ÿèƒ½ç¨¼åƒç‡: â‰¥ 99.5%

Error Handling:
  - JavaScript Error Rate: â‰¤ 0.1%
  - Network Error Recovery: æ­£å¸¸å‹•ä½œ
  - Graceful Degradation: å¯¾å¿œæ¸ˆã¿

Security:
  - DOMPurifyå‹•ä½œ: æ­£å¸¸
  - CSP Headers: ç¶­æŒ
  - XSSé˜²å¾¡: ç¶­æŒ
```

### é–‹ç™ºä½“é¨“è¦ä»¶ ğŸ”§
```yaml
Development:
  - Dev serverèµ·å‹•æ™‚é–“: å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯”å‘ä¸Š
  - Hot Reload: æ­£å¸¸å‹•ä½œ
  - Type checking: é«˜é€ŸåŒ–
  
Automation:
  - enhanced-deploy.js: æ­£å¸¸å‹•ä½œ
  - #rotomdeploy: 2åˆ†ä»¥å†…å®Œäº†
  - CI/CD pipeline: æ­£å¸¸å‹•ä½œ
```

## ğŸ“š é–¢é€£è³‡æ–™ãƒ»å‚è€ƒæƒ…å ±

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Next.js 15 Upgrade Guide](https://nextjs.org/docs/app/guides/upgrading/version-15)
- [React 19 Upgrade Guide](https://react.dev/blog/2024/04/25/react-19-upgrade-guide)
- [React 19 Release Notes](https://react.dev/blog/2024/12/05/react-19)

### ç ´å£Šçš„å¤‰æ›´è©³ç´°
- Next.js 15: Async Request APIs, Caching Changes, Turbopack Stable
- React 19: forwardRef changes, useRef types, PropTypes removal

### Codemod Tools
```bash
# React 19è‡ªå‹•ç§»è¡Œ
npx types-react-codemod@latest preset-19 ./src

# Next.js 15è‡ªå‹•ç§»è¡Œ
npx @next/codemod@latest upgrade ./
```

### ä¾å­˜é–¢ä¿‚äº’æ›æ€§
- âœ… Zod, Fuse.js, Tailwind CSS: å®Œå…¨äº’æ›
- âš ï¸ Lucide React: peer dependencyè­¦å‘Šï¼ˆæ©Ÿèƒ½ã¯æ­£å¸¸ï¼‰
- âš ï¸ DOMPurify: SSRå¯¾å¿œå¼·åŒ–å¿…è¦
- â“ Gray-matter: å¤ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€è¦ç›£è¦–

## ğŸ“ å®Ÿè¡Œãƒ­ã‚°ãƒ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Pre-upgrade Checklist
- [ ] ç¾åœ¨ã®å‹•ä½œç’°å¢ƒãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- [ ] Git tagä½œæˆ (v1.0.0-stable)
- [ ] ä¾å­˜é–¢ä¿‚ãƒªã‚¹ãƒˆä¿å­˜
- [ ] ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒä½œæˆ

### Phase 1: ç’°å¢ƒæº–å‚™
- [ ] React 19ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- [ ] Next.js 15ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«  
- [ ] TypeScriptå‹å®šç¾©æ›´æ–°
- [ ] åŸºæœ¬å‹•ä½œç¢ºèª

### Phase 2: ã‚³ãƒ¼ãƒ‰ä¿®æ­£
- [ ] forwardRef â†’ ref propç§»è¡Œ
- [ ] useRefå‹å®šç¾©ç¢ºèª
- [ ] DOMPurify ãƒ“ãƒ«ãƒ‰æ™‚å¯¾å¿œ
- [ ] ä¾å­˜é–¢ä¿‚å•é¡Œè§£æ±º

### Phase 3: Tailwind CSS v4 ç§»è¡Œ
- [ ] Node.js 20+ ç’°å¢ƒç¢ºèª
- [ ] è‡ªå‹•ç§»è¡Œãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
- [ ] CSS-firstè¨­å®šå¤‰æ›
- [ ] PostCSSè¨­å®šæ›´æ–°
- [ ] Typography pluginç¢ºèª

### Phase 4: ãƒ†ã‚¹ãƒˆ
- [ ] æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ†ã‚¹ãƒˆ
- [ ] ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆ

### Phase 4: æœ¬ç•ªé©ç”¨
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†
- [ ] æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
- [ ] ç¨¼åƒç›£è¦–é–‹å§‹
- [ ] KPIç¢ºèªå®Œäº†

### Post-upgrade Tasks
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ææ¡ˆ
- [ ] æŠ€è¡“å‚µå‹™æ•´ç†
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [ ] ãƒãƒ¼ãƒ çŸ¥è¦‹å…±æœ‰

---

## ğŸ¯ ã¾ã¨ã‚

ã“ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰è¨ˆç”»ã¯ã€RotomSongsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®**æŒç¶šå¯èƒ½ãªæˆé•·**ã‚’ç›®çš„ã¨ã—ãŸæˆ¦ç•¥çš„ãªæŠ€è¡“æŠ•è³‡ã§ã™ã€‚

### æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ
- **é–‹ç™ºåŠ¹ç‡**: React Compilerè‡ªå‹•æœ€é©åŒ–ã€Turbopacké«˜é€ŸåŒ–
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã€ã‚ˆã‚Šè‰¯ã„ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°  
- **ä¿å®ˆæ€§**: æœ€æ–°æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã«ã‚ˆã‚‹é•·æœŸã‚µãƒãƒ¼ãƒˆ
- **æŠ€è¡“çš„ä¾¡å€¤**: 2025å¹´ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹æº–æ‹ 

### æ…é‡ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
æ®µéšçš„ç§»è¡Œã¨ãƒªã‚¹ã‚¯ç®¡ç†ã«ã‚ˆã‚Šã€**ã‚¼ãƒ­ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ **ã§ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å®Ÿç¾ã—ã¾ã™ã€‚ä¸‡ä¸€ã®å•é¡Œç™ºç”Ÿæ™‚ã‚‚ã€ç¢ºå®Ÿãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ã«ã‚ˆã‚Šè¿…é€Ÿãªå¾©æ—§ãŒå¯èƒ½ã§ã™ã€‚

**æˆåŠŸã®éµ**: å¾¹åº•ã—ãŸãƒ†ã‚¹ãƒˆã€æ®µéšçš„å®Ÿè£…ã€ç¶™ç¶šçš„ç›£è¦–

---

*Next.js 15 & React 19 ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ”¹ä¿®è¨ˆç”»æ›¸ v1.0*  
*ä½œæˆè€…: Claude Code*  
*æœ€çµ‚æ›´æ–°: 2025å¹´7æœˆ27æ—¥*